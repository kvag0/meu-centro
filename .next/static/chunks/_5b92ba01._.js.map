{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/caiosobrinho/Downloads/meu-centro/convex/_generated/api.js"],"sourcesContent":["/* eslint-disable */\n/**\n * Generated `api` utility.\n *\n * THIS CODE IS AUTOMATICALLY GENERATED.\n *\n * To regenerate, run `npx convex dev`.\n * @module\n */\n\nimport { anyApi } from \"convex/server\";\n\n/**\n * A utility for referencing Convex functions in your app's API.\n *\n * Usage:\n * ```js\n * const myFunctionReference = api.myModule.myFunction;\n * ```\n */\nexport const api = anyApi;\nexport const internal = anyApi;\n"],"names":[],"mappings":"AAAA,kBAAkB,GAClB;;;;;;;CAOC;;;;;;AAED;AAAA;;AAUO,MAAM,MAAM,mKAAM;AAClB,MAAM,WAAW,mKAAM","debugId":null}},
    {"offset": {"line": 29, "column": 0}, "map": {"version":3,"sources":["file:///Users/caiosobrinho/Downloads/meu-centro/app/dashboard/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useConvexAuth, useQuery } from \"convex/react\";\nimport { api } from \"@/convex/_generated/api\";\nimport { Doc } from \"@/convex/_generated/dataModel\"; // Importando Doc para tipagem\nimport { format } from \"date-fns\";\nimport { ptBR } from \"date-fns/locale\";\nimport { Calendar, CheckCircle } from \"lucide-react\";\n\nexport default function DashboardPage() {\n  const { isLoading, isAuthenticated } = useConvexAuth();\n\n  if (isLoading) {\n    return <div className=\"flex items-center justify-center h-screen\">Carregando...</div>;\n  }\n\n  if (!isAuthenticated) {\n    // O middleware deve redirecionar, mas é uma segurança extra\n    return <div className=\"flex items-center justify-center h-screen\">Por favor, faça login para ver seu painel.</div>;\n  }\n\n  return <MemberDashboard />;\n}\n\nfunction MemberDashboard() {\n  // Busca o usuário atual para obter o nome e o terreiroId\n  const currentUser = useQuery(api.users.getMe);\n  const terreiroId = currentUser?.terreiroId;\n\n  // Busca os diagnósticos e eventos\n  // Usamos 'skip' para não rodar a query de eventos antes de ter o terreiroId\n  const myDiagnoses = useQuery(api.diagnoses.getMyDiagnosesWithDetails) || [];\n  const publicEvents = useQuery(api.events.getPublic, terreiroId ? { terreiroId } : \"skip\") || [];\n\n  if (!currentUser) {\n    return <div className=\"flex items-center justify-center h-screen\">Carregando dados do usuário...</div>;\n  }\n  \n  // Filtra diagnósticos que não puderam encontrar o evento (ex: evento deletado)\n  const validDiagnoses = myDiagnoses.filter(d => d.eventDetails);\n\n  return (\n    <div className=\"container mx-auto p-4 md:p-8 space-y-12\">\n      <div>\n        <h1 className=\"text-3xl font-bold\">Meu Painel</h1>\n        <p className=\"text-muted-foreground\">Bem-vindo, {currentUser.name}!</p>\n      </div>\n\n      {/* Seção de Diagnósticos */}\n      <section>\n        <h2 className=\"text-2xl font-semibold mb-4 border-b pb-2\">Minhas Tarefas e Diagnósticos</h2>\n        <div className=\"space-y-4\">\n          {validDiagnoses.length > 0 ? (\n            validDiagnoses.map((diag) => (\n              <div key={diag._id} className=\"p-4 bg-yellow-50 border border-yellow-200 rounded-lg flex items-start space-x-4\">\n                <CheckCircle className=\"h-6 w-6 text-yellow-600 mt-1 flex-shrink-0\" />\n                <div>\n                  <h3 className=\"font-bold\">{diag.eventDetails!.title}</h3>\n                  <p className=\"text-sm text-gray-700\">{diag.eventDetails!.description}</p>\n                  {diag.notes && <p className=\"text-sm mt-1 italic text-gray-600\"><strong>Observação:</strong> {diag.notes}</p>}\n                  <div className=\"flex items-center text-sm text-gray-500 mt-2\">\n                    <Calendar className=\"h-4 w-4 mr-2\" />\n                    <span>{format(new Date(diag.eventDetails!.date), \"dd 'de' MMMM, yyyy\", { locale: ptBR })}</span>\n                  </div>\n                </div>\n              </div>\n            ))\n          ) : (\n            <p className=\"text-gray-500\">Você não tem nenhuma tarefa ou diagnóstico no momento.</p>\n          )}\n        </div>\n      </section>\n\n      {/* Seção de Eventos Públicos */}\n      <section>\n        <h2 className=\"text-2xl font-semibold mb-4 border-b pb-2\">Agenda do Terreiro</h2>\n        <div className=\"space-y-4\">\n          {publicEvents.length > 0 ? (\n            // CORREÇÃO: Adicionando o tipo explícito para 'event'\n            publicEvents.map((event: Doc<\"events\">) => (\n              <div key={event._id} className=\"p-4 bg-gray-50 border rounded-lg flex items-start space-x-4\">\n                <Calendar className=\"h-6 w-6 text-gray-600 mt-1 flex-shrink-0\" />\n                 <div>\n                    <h3 className=\"font-bold\">{event.title}</h3>\n                    <p className=\"text-sm text-gray-700\">{event.description}</p>\n                    <div className=\"flex items-center text-sm text-gray-500 mt-2\">\n                      <span>{format(new Date(event.date), \"dd 'de' MMMM, yyyy\", { locale: ptBR })}</span>\n                    </div>\n                  </div>\n              </div>\n            ))\n          ) : (\n            <p className=\"text-gray-500\">Nenhum evento público agendado no momento.</p>\n          )}\n        </div>\n      </section>\n\n    </div>\n  );\n}\n\n"],"names":[],"mappings":"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","debugId":null}}]
}