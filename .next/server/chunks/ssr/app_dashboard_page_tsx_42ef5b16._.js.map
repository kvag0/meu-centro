{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/caiosobrinho/Downloads/meu-centro/app/dashboard/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useConvexAuth, useMutation, useQuery } from \"convex/react\";\nimport { api } from \"@/convex/_generated/api\";\nimport { Doc, Id } from \"@/convex/_generated/dataModel\";\nimport { format } from \"date-fns\";\nimport { ptBR } from \"date-fns/locale\";\nimport { BookHeart, Droplets, PartyPopper, CalendarDays, Check, Circle } from \"lucide-react\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { cn } from \"@/lib/utils\"; // Certifique-se de que seu arquivo utils.ts existe\n\ntype DiagnosisWithDetails = Doc<\"diagnoses\"> & {\n  details: Doc<\"events\"> | Doc<\"bathRecipes\"> | Doc<\"rituals\"> | null;\n};\n\nexport default function DashboardPage() {\n  const { isLoading, isAuthenticated } = useConvexAuth();\n\n  if (isLoading) {\n    return <div className=\"p-8 text-center\">Carregando sua jornada...</div>;\n  }\n  if (!isAuthenticated) {\n    // Redireciona para a página de login se não estiver autenticado\n    // (Você pode querer implementar um redirecionamento real aqui)\n    return <div className=\"p-8\">Acesso negado. Por favor, faça login.</div>;\n  }\n  return <MemberDashboard />;\n}\n\nfunction MemberDashboard() {\n  const myDiagnoses = useQuery(api.diagnoses.getMyDiagnosesWithDetails) || [];\n  const publicEvents = useQuery(api.events.getPublic) || [];\n  const updateStatus = useMutation(api.diagnoses.updateStatus);\n\n  const handleUpdateStatus = (diagnosisId: Id<\"diagnoses\">, currentStatus: \"pending\" | \"completed\") => {\n    const newStatus = currentStatus === \"pending\" ? \"completed\" : \"pending\";\n    updateStatus({ diagnosisId, status: newStatus });\n  };\n\n  return (\n    <div className=\"container mx-auto p-4 md:p-8 space-y-12\">\n      <div>\n        <h1 className=\"text-3xl font-bold\">Meu Painel</h1>\n        <p className=\"text-muted-foreground\">\n          Acompanhe seus diagnósticos e os próximos eventos do terreiro.\n        </p>\n      </div>\n\n      <section>\n        <h2 className=\"text-2xl font-semibold mb-4 border-b pb-2\">Minhas Tarefas</h2>\n        <div className=\"space-y-4\">\n          {myDiagnoses.length === 0 ? (\n            <p className=\"text-muted-foreground\">Você ainda não tem tarefas ou diagnósticos atribuídos.</p>\n          ) : (\n            myDiagnoses.map((diag: DiagnosisWithDetails) => (\n              <div \n                key={diag._id} \n                className={cn(\n                  \"border bg-card text-card-foreground rounded-lg p-4 flex items-start space-x-4 shadow-sm transition-all\",\n                  diag.status === 'completed' && \"bg-muted/50 opacity-70\" // Estilo para tarefas concluídas\n                )}\n              >\n                <div className=\"bg-primary/10 p-3 rounded-full mt-1\">\n                  {diag.type === 'event' && <PartyPopper className=\"h-6 w-6 text-primary\" />}\n                  {diag.type === 'bath' && <Droplets className=\"h-6 w-6 text-primary\" />}\n                  {diag.type === 'ritual' && <BookHeart className=\"h-6 w-6 text-primary\" />}\n                </div>\n                <div className=\"flex-1\">\n                  <div className=\"flex justify-between items-start\">\n                    <h3 className=\"font-semibold text-lg\">{diag.details?.title || \"Item não encontrado\"}</h3>\n                     <Button \n                      variant=\"ghost\" \n                      size=\"sm\"\n                      onClick={() => handleUpdateStatus(diag._id, diag.status)}\n                    >\n                      {diag.status === 'pending' ? (\n                        <>\n                          <Circle className=\"h-4 w-4 mr-2\" />\n                          Marcar como concluído\n                        </>\n                      ) : (\n                        <>\n                          <Check className=\"h-4 w-4 mr-2 text-green-500\" />\n                          Concluído\n                        </>\n                      )}\n                    </Button>\n                  </div>\n                  <div className=\"text-sm text-muted-foreground mt-1\">\n                    {diag.type === 'event' && diag.details && (\n                      <p><b>Data:</b> {format(new Date((diag.details as Doc<\"events\">).date), \"PPP\", { locale: ptBR })}</p>\n                    )}\n                    {diag.type === 'bath' && diag.details && (\n                      <p><b>Ingredientes:</b> {(diag.details as Doc<\"bathRecipes\">).ingredients}</p>\n                    )}\n                    {diag.type === 'ritual' && diag.details && (\n                      <p>{(diag.details as Doc<\"rituals\">).description}</p>\n                    )}\n                  </div>\n                  {diag.notes && <p className=\"text-sm mt-2 border-l-2 pl-3 italic\"><b>Observação do Guia:</b> \"{diag.notes}\"</p>}\n                </div>\n              </div>\n            ))\n          )}\n        </div>\n      </section>\n\n      <section>\n        <h2 className=\"text-2xl font-semibold mb-4 border-b pb-2\">Próximos Eventos Públicos</h2>\n        <div className=\"space-y-4\">\n           {publicEvents.length === 0 ? (\n             <p className=\"text-muted-foreground\">Nenhum evento público agendado no momento.</p>\n           ) : (\n             publicEvents.map((event) => (\n                <div key={event._id} className=\"border-l-4 border-primary pl-4 py-2\">\n                  <p className=\"font-semibold\">{event.title}</p>\n                  <div className=\"flex items-center text-sm text-muted-foreground mt-1\">\n                    <CalendarDays className=\"h-4 w-4 mr-2\" />\n                    {format(new Date(event.date), \"EEEE, dd 'de' MMMM 'às' HH:mm\", { locale: ptBR })}\n                  </div>\n                </div>\n              ))\n           )}\n        </div>\n      </section>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA,6LAAkC,mDAAmD;AAVrF;;;;;;;;;AAgBe,SAAS;IACtB,MAAM,EAAE,SAAS,EAAE,eAAe,EAAE,GAAG,IAAA,kLAAa;IAEpD,IAAI,WAAW;QACb,qBAAO,8OAAC;YAAI,WAAU;sBAAkB;;;;;;IAC1C;IACA,IAAI,CAAC,iBAAiB;QACpB,gEAAgE;QAChE,+DAA+D;QAC/D,qBAAO,8OAAC;YAAI,WAAU;sBAAM;;;;;;IAC9B;IACA,qBAAO,8OAAC;;;;;AACV;AAEA,SAAS;IACP,MAAM,cAAc,IAAA,oKAAQ,EAAC,kIAAG,CAAC,SAAS,CAAC,yBAAyB,KAAK,EAAE;IAC3E,MAAM,eAAe,IAAA,oKAAQ,EAAC,kIAAG,CAAC,MAAM,CAAC,SAAS,KAAK,EAAE;IACzD,MAAM,eAAe,IAAA,uKAAW,EAAC,kIAAG,CAAC,SAAS,CAAC,YAAY;IAE3D,MAAM,qBAAqB,CAAC,aAA8B;QACxD,MAAM,YAAY,kBAAkB,YAAY,cAAc;QAC9D,aAAa;YAAE;YAAa,QAAQ;QAAU;IAChD;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;;kCACC,8OAAC;wBAAG,WAAU;kCAAqB;;;;;;kCACnC,8OAAC;wBAAE,WAAU;kCAAwB;;;;;;;;;;;;0BAKvC,8OAAC;;kCACC,8OAAC;wBAAG,WAAU;kCAA4C;;;;;;kCAC1D,8OAAC;wBAAI,WAAU;kCACZ,YAAY,MAAM,KAAK,kBACtB,8OAAC;4BAAE,WAAU;sCAAwB;;;;;mCAErC,YAAY,GAAG,CAAC,CAAC,qBACf,8OAAC;gCAEC,WAAW,wHACT,0GACA,KAAK,MAAM,KAAK,eAAe,yBAAyB,iCAAiC;;;kDAG3F,8OAAC;wCAAI,WAAU;;4CACZ,KAAK,IAAI,KAAK,yBAAW,8OAAC,mOAAW;gDAAC,WAAU;;;;;;4CAChD,KAAK,IAAI,KAAK,wBAAU,8OAAC,sNAAQ;gDAAC,WAAU;;;;;;4CAC5C,KAAK,IAAI,KAAK,0BAAY,8OAAC,6NAAS;gDAAC,WAAU;;;;;;;;;;;;kDAElD,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAI,WAAU;;kEACb,8OAAC;wDAAG,WAAU;kEAAyB,KAAK,OAAO,EAAE,SAAS;;;;;;kEAC7D,8OAAC,qIAAM;wDACN,SAAQ;wDACR,MAAK;wDACL,SAAS,IAAM,mBAAmB,KAAK,GAAG,EAAE,KAAK,MAAM;kEAEtD,KAAK,MAAM,KAAK,0BACf;;8EACE,8OAAC,gNAAM;oEAAC,WAAU;;;;;;gEAAiB;;yFAIrC;;8EACE,8OAAC,6MAAK;oEAAC,WAAU;;;;;;gEAAgC;;;;;;;;;;;;;;0DAMzD,8OAAC;gDAAI,WAAU;;oDACZ,KAAK,IAAI,KAAK,WAAW,KAAK,OAAO,kBACpC,8OAAC;;0EAAE,8OAAC;0EAAE;;;;;;4DAAS;4DAAE,qKAAO,IAAI,KAAK,AAAC,KAAK,OAAO,CAAmB,IAAI,GAAG,OAAO;gEAAE,QAAQ,yJAAI;4DAAC;;;;;;;oDAE/F,KAAK,IAAI,KAAK,UAAU,KAAK,OAAO,kBACnC,8OAAC;;0EAAE,8OAAC;0EAAE;;;;;;4DAAiB;4DAAG,KAAK,OAAO,CAAwB,WAAW;;;;;;;oDAE1E,KAAK,IAAI,KAAK,YAAY,KAAK,OAAO,kBACrC,8OAAC;kEAAG,AAAC,KAAK,OAAO,CAAoB,WAAW;;;;;;;;;;;;4CAGnD,KAAK,KAAK,kBAAI,8OAAC;gDAAE,WAAU;;kEAAsC,8OAAC;kEAAE;;;;;;oDAAuB;oDAAG,KAAK,KAAK;oDAAC;;;;;;;;;;;;;;+BA3CvG,KAAK,GAAG;;;;;;;;;;;;;;;;0BAmDvB,8OAAC;;kCACC,8OAAC;wBAAG,WAAU;kCAA4C;;;;;;kCAC1D,8OAAC;wBAAI,WAAU;kCACX,aAAa,MAAM,KAAK,kBACvB,8OAAC;4BAAE,WAAU;sCAAwB;;;;;mCAErC,aAAa,GAAG,CAAC,CAAC,sBACf,8OAAC;gCAAoB,WAAU;;kDAC7B,8OAAC;wCAAE,WAAU;kDAAiB,MAAM,KAAK;;;;;;kDACzC,8OAAC;wCAAI,WAAU;;0DACb,8OAAC,sOAAY;gDAAC,WAAU;;;;;;4CACvB,qKAAO,IAAI,KAAK,MAAM,IAAI,GAAG,iCAAiC;gDAAE,QAAQ,yJAAI;4CAAC;;;;;;;;+BAJxE,MAAM,GAAG;;;;;;;;;;;;;;;;;;;;;;AAanC","debugId":null}}]
}